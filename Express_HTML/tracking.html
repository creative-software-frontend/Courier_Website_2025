
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Order Details</title>
    <meta name="viewport" content="width=device-width,  user-scalable=no">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>
    @import  url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,300&family=Poppins&family=Roboto:wght@400;500&display=swap');

    body {
        line-height: 1.3em;
        min-width: 1440px;
        text-align: center;
    }

    .history-tl-container {
        font-family: "Roboto" xfdd, sans-serif;
        width: 50%;
        margin: auto;
        display: block;
        position: relative;
        backgroud: #f5f5f5;
    }

    .history-tl-container ul.tl {
        margin: 20px 0;
        padding: 0;
        display: inline-block;

    }

    .history-tl-container ul.tl li {
        list-style: none;
        margin: auto;
        margin-left: 200px;
        min-height: 50px;
        /*background: rgba(255,255,0,0.1);*/
        border-left: 1px dashed #aa0879;

        padding: 0 0 50px 30px;
        position: relative;
    }

    .history-tl-container ul.tl li:last-child {
        border-left: 0;
    }

    .history-tl-container ul.tl li::before {
        position: absolute;
        left: -11px;
        top: -5px;
        content: " ";
        border: 2px solid rgba(255, 255, 255, 0.74);
        border-radius: 500%;
        background: #b30699;
        height: 30px;
        width: 30px;
        transition: all 500ms ease-in-out;

    }

    .history-tl-container ul.tl li:hover::before {
        border-color: #8d0454;
        transition: all 1000ms ease-in-out;
    }

    ul.tl li .item-title {
        width: 220px;
        text-align: start;
        font-size: 1.3rem;
    }

    ul.tl li .item-detail {
        color: rgba(0, 0, 0, 0.5);
        font-size: .9rem;
        text-align: start;
    }

    ul.tl li .timestamp {
        color: #000000;
        position: absolute;
        width: 100px;
        left: -60%;
        text-align: right;
        font-size: 17px;
        background: #ffe2ff;
        padding: 5px;
    }


    .container-1 h1 {
        text-align: center;
        color: purple;
    }

    .container-1 a img {
        margin-top: 5px;

    }

    .container-2 {
        border: 2px solid #f5ae70;
        height: 80px;

        padding: 5px;
    }

    .container-2 p {
        text-align: left;
        margin-top: 5%;
        color: black;
    }

    .container-2 .p1 {
        text-align: right;
        margin-top: 1%;
        color: #8D8D8D;
    }

    .container-3 {
        margin-top: -3%;
    }

    .left {
        float: left;
    }

    .right {
        float: right;
    }

    td {
        text-align: left;
    }

    th {
        text-align: left;
    }

    td img {
        width: 160px;
        height: 160px;
    }

    .text h2 {
        color: purple;
    }
</style>

<body style="background-color:#f5f5f5;">

    <div class="container" style="background-color:#f5f5f5;">
        <div class="row">
            <div class="col-8 offset-1">
                <div class="container-1 mt-5">
                    
                    <h1 class="mt-1" id="companyName"></h1>
                    <h5 class="mt-1" id="companyAddress"></h5>
                    <h5 class="mt-5"><u> Order Track No (<span id="trackingId"></span>)</u></h5>

                    <a href=""> <i class="fa fa-print"></i>
                    </a>


                    <h5></h5>

                </div>
                <div class="container">
                    <table class="table table-bordered mt-5">
                        <tbody>


                            <tr>

                                <th class="text-left">Shipper Name</th>
                                <td class="text-left" id="shipperName">  </td>
                                <th class="">Consignee Name</th>
                                <td id="consigneeName"></td>

                            </tr>

                            <tr>

                                <th class="">Shipper Phone</th>
                                <td id="shipperPhone"></td>
                                <th class="text-left">Consignee Phone</th>
                                <td id="consigneePhone" class="text-left"></td>
                            </tr>



                            
                            <tr>


                                <th class="">Shipper Address</th>
                                <td id="shipperAddress"></td>
                                <th class="">Consignee Adress</th>
                                <td id="consigneeAddress"></td>

                            </tr>
                            
                            </tr>


                        </tbody>
                    </table>
                </div>


                <div class="text">
                    <h2>Order Tracking</h2>
                </div>

                <div class="history-tl-container">
                    <ul class="tl">
                   
                            
                    </ul>
                </div>

            </div>
        </div>
    </div>
      <!-- Jquery -->
      <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>


    <script>
        $(document).ready(function () {
            const booking_data = JSON.parse(localStorage.getItem("booking_data"));
            const company = JSON.parse(localStorage.getItem("company"));
            const order_statuses = JSON.parse(localStorage.getItem("order_statuses"));
            
            const companyName = $("#companyName");
            const companyAddress = $("#companyAddress");
            const trackingId = $("#trackingId");
            
            const shipperName = $("#shipperName");
            const shipperAddress = $("#shipperAddress");
            const shipperPhone = $("#shipperPhone");
            
            const consigneeName = $("#consigneeName");
            const consigneeAddress = $("#consigneeAddress");
            const consigneePhone = $("#consigneePhone");
            
            companyName.text(company.name);
            companyAddress.text(company.address);
            trackingId.text(booking_data.booking_no);
            
            shipperName.text(booking_data.shipper);
            shipperAddress.text(booking_data.shipper_address);
            shipperPhone.text(booking_data.shipper_contact_no);
            
            consigneeName.text(booking_data.consignee);
            consigneeAddress.text(booking_data.consignee_address);
            consigneePhone.text(booking_data.consignee_contact_no);
            
            const historyContainer = $(".tl");
            order_statuses.forEach((order) => {
              const timestamp = new Date(order.created_at);
              console.log(timestamp);
              const hours = timestamp.getHours() % 12 || 12; // Convert 24-hour time to 12-hour time
              const minutes = timestamp.getMinutes();
              const period = timestamp.getHours() >= 12 ? 'PM' : 'AM'; // Determine AM/PM
              
              const formattedTime = `${hours}:${minutes < 10 ? '0' : ''}${minutes} ${period}`;
              
              const day = timestamp.getDate();
              const month = timestamp.toLocaleString('default', { month: 'short' });
              const year = timestamp.getFullYear();
              const formattedDate = `${day} ${month} ${year}`;
              
              const li = $("<li>").addClass("tl-item");
              const timestampDiv = $("<div>").addClass("timestamp").html(`${formattedDate} <br> ${formattedTime}`);
              const titleDiv = $("<div>").addClass("item-title").text(order.status);
              const detailDiv = $("<div>").addClass("item-detail").text(order.creator_name);
            
              li.append(timestampDiv, titleDiv, detailDiv);
              historyContainer.append(li);
            });
          });
          
          
          
          
          
         
      </script>

</body>
</html>
